{% extends "admin/base.html" %}

{% block title %}Error Details - Smarter.Dev Admin{% endblock %}

{% block content %}
<div class="error-detail-page">
    <div class="page-actions">
        <a href="/admin/analytics" class="btn btn-outline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Back to Analytics
        </a>
    </div>
    
    <div class="error-header">
        <div class="error-badge">{{ error.error_type }}</div>
        <div class="error-time">{{ error.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</div>
    </div>
    
    <div class="error-details">
        <div class="detail-section">
            <h3>Basic Information</h3>
            <div class="detail-grid">
                <div class="detail-item">
                    <div class="detail-label">Path</div>
                    <div class="detail-value">{{ error.path }}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Method</div>
                    <div class="detail-value">{{ error.method }}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">IP Address</div>
                    <div class="detail-value">{{ error.ip_address or 'Unknown' }}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Response Time</div>
                    <div class="detail-value">{{ "%.3f"|format(error.response_time) }}s</div>
                </div>
            </div>
        </div>
        
        <div class="detail-section">
            <h3>Error Message</h3>
            <div class="code-block">{{ error.error_message }}</div>
        </div>
        
        <div class="detail-section">
            <h3>Traceback</h3>
            <div class="code-block traceback">{{ error.error_details|replace('\n', '<br>')|safe }}</div>
        </div>
        
        <div class="detail-section">
            <h3>User Agent</h3>
            <div class="code-block">{{ error.user_agent or 'Unknown' }}</div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .error-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    
    .error-badge {
        background-color: #ef4444;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        font-weight: 600;
    }
    
    .error-time {
        color: #9ca3af;
        font-size: 0.875rem;
    }
    
    .detail-section {
        background-color: #1f2937;
        border-radius: 0.5rem;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }
    
    .detail-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1rem;
    }
    
    .detail-item {
        margin-bottom: 1rem;
    }
    
    .detail-label {
        color: #9ca3af;
        font-size: 0.875rem;
        margin-bottom: 0.25rem;
    }
    
    .detail-value {
        font-weight: 500;
    }
    
    .code-block {
        background-color: #111827;
        border-radius: 0.375rem;
        padding: 1rem;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.875rem;
        white-space: pre-wrap;
        overflow-x: auto;
    }
    
    .traceback {
        max-height: 400px;
        overflow-y: auto;
    }
</style>
{% endblock %}
